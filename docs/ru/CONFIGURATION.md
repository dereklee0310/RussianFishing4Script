# Настройка RF4S

---

## Язык интерфейса

RF4S поддерживает **английский** (`en`) и **русский** (`ru`) интерфейс. Параметр `LANGUAGE` в файле `config.yaml` определяет:
- Язык всех сообщений скрипта (меню, логи, результаты, уведомления)
- Набор изображений для распознавания элементов игры (`static/en/` или `static/ru/`)

```yaml
# Английский
LANGUAGE: "en"

# Русский
LANGUAGE: "ru"
```

> [!IMPORTANT]
> Значение `LANGUAGE` должно совпадать с языком, установленным в самой игре Russian Fishing 4.

Одноразовое переключение через командную строку (без изменения конфига):
```
python main.py LANGUAGE "ru"
```

---

## Параметры запуска

Параметры запуска позволяют включать функции при старте скрипта.

### Способы запуска

**Исполняемый файл:**
```
.\main.exe [команда] [опции]
```

**Python:**
```
python main.py [команда] [опции]
```

**uv:**
```
uv run main.py [команда] [опции]
```

> [!NOTE]
> Если параметры не указаны (или запуск двойным щелчком), скрипт войдёт в интерактивный режим: покажет список функций, предложит выбрать по номеру и ввести опции.
>
> ![Параметры запуска][launch_options]

### Интерактивный режим

При запуске без аргументов:
1. Отображается список функций (0–5)
2. Вводите номер функции, `h` — справка, `q` — выход
3. Вводите параметры запуска или Enter для пропуска

---

## Команды

### 1. `bot` — Рыболовный бот

Автоматизирует процесс рыбалки.

```
python main.py bot [опции]
```

#### Основные опции

| Опция | Описание |
|---|---|
| `-V`, `--version` | Показать версию и выйти |
| `-p PID`, `--pid PID` | Указать ID профиля (0–N) |
| `-N ИМЯ`, `--pname ИМЯ` | Указать имя профиля |
| `-n ЧИСЛО`, `--fishes-in-keepnet ЧИСЛО` | Количество рыб уже в садке (по умолчанию: 0) |

#### Режимы рыбалки

| Опция | Описание | Значения |
|---|---|---|
| `-T [НАПР.]`, `--trolling [НАПР.]` | Режим троллинга | `forward`, `left`, `right` (по умолчанию: `forward`) |
| `-R [МЕТРЫ]`, `--rainbow [МЕТРЫ]` | Режим радужной лески | `0`, `5` (по умолчанию: `5`) |
| `-BT [ДНИ]`, `--boat-ticket [ДНИ]` | Автопродление билета на лодку | `1`, `2`, `3`, `5` (по умолчанию: `5`) |

#### Флаги: управление рыбой

| Флаг | Описание |
|---|---|
| `-t`, `--tag` | Оставлять только помеченную рыбу |
| `-c`, `--coffee` | Пить кофе при низкой выносливости во время вываживания |
| `-a`, `--alcohol` | Пить алкоголь перед сохранением рыбы |
| `-l`, `--lift` | Постоянно поднимать снасть во время вываживания |

#### Флаги: снасти и приманки

| Флаг | Описание |
|---|---|
| `-L`, `--lure` | Менять приманку на случайную избранную (режим: спиннинг) |
| `-BL`, `--broken-lure` | Заменять сломанные приманки на избранные |
| `-e`, `--electro` | Электро-режим для катушек серии Electro Raptor |
| `-FB`, `--friction-brake` | Автоматически регулировать фрикцион |
| `-GR`, `--gear-ratio` | Переключить передачу после таймаута подмотки |

#### Флаги: прикормка (донная рыбалка)

| Флаг | Описание |
|---|---|
| `-DM`, `--dry-mix` | Пополнение сухой смеси |
| `-GB`, `--groundbait` | Пополнение прикормки |
| `-PVA`, `--pva` | Пополнение PVA пакетов |
| `-SR`, `--spod-rod` | Перезабрасывать сподовую удочку |

#### Флаги: поведение бота

| Флаг | Описание |
|---|---|
| `-r`, `--refill` | Потреблять чай и морковь при низком голоде или комфорте |
| `-H`, `--harvest` | Собирать наживку перед забросом |
| `-m`, `--mouse` | Случайно двигать мышью перед забросом |
| `-P`, `--pause` | Иногда приостанавливать скрипт перед забросом |
| `-RC`, `--random-cast` | Делать случайные лишние забросы |
| `-SC`, `--skip-cast` | Пропустить первый заброс |
| `-NA`, `--no-animation` | Отключить ожидание анимации трофея и подарка |

#### Флаги: логирование и уведомления

| Флаг | Описание |
|---|---|
| `-b`, `--bite` | Скриншот при поклёвке (`screenshots/`) |
| `-s`, `--screenshot` | Скриншот после поимки рыбы (`screenshots/`) |
| `-d`, `--data` | Сохранять данные рыбалки в `/logs` |
| `-E`, `--email` | Email-уведомление при остановке |
| `-M`, `--miaotixing` | Уведомление Miaotixing при остановке |
| `-D`, `--discord` | Уведомление Discord при остановке |
| `-TG`, `--telegram` | Уведомление Telegram при остановке |

#### Флаги: действия после остановки

| Флаг | Описание |
|---|---|
| `-S`, `--shutdown` | Выключить компьютер |
| `-SO`, `--signout` | Выйти из аккаунта вместо закрытия игры |

#### Примеры

```bash
# Бот с профилем 0 и автофрикционом
python main.py bot -p 0 -FB

# Бот с именованным профилем и сохранением скриншотов
python main.py bot -N "MyProfile" -s -b

# Троллинг вперёд с радужной леской
python main.py bot -T forward -R 5

# Донная рыбалка с прикормкой
python main.py bot -DM -GB -PVA

# Восстановление характеристик + сбор наживки + кофе
python main.py bot -rcH
```

> [!IMPORTANT]
> Для `-r` и `-c` добавьте чай, морковь и кофе в **[избранное][favorite_food]**.
> Для автозамены снасти добавьте предметы в **[избранное][favorite_lure]**.

---

### 2. `craft` — Крафт предметов

Автоматизирует создание наживок, прикормок, приманок и т.д.

```
python main.py craft [опции]
```

| Опция | Описание |
|---|---|
| `-V`, `--version` | Показать версию |
| `-d`, `--discard` | Выбрасывать все созданные предметы (для прикормок) |
| `-i`, `--ignore` | Игнорировать невыбранные слоты материалов |
| `-n ЧИСЛО`, `--craft-limit ЧИСЛО` | Количество предметов (по умолчанию: -1, бесконечно) |

```bash
# Создать 10 предметов
python main.py craft -n 10

# Создавать прикормку и выбрасывать
python main.py craft -d
```

---

### 3. `move` — Движение вперёд

Переключает движение персонажа вперёд (удерживает клавишу `W`).

```
python main.py move [опции]
```

| Опция | Описание |
|---|---|
| `-V`, `--version` | Показать версию |
| `-s`, `--shift` | Удерживать Shift при движении (бег) |

```bash
# Обычное движение
python main.py move

# Бег с Shift
python main.py move -s
```

---

### 4. `harvest` — Сбор наживки

Автоматически собирает наживку в режиме ожидания.

```
python main.py harvest [опции]
```

| Опция | Описание |
|---|---|
| `-V`, `--version` | Показать версию |
| `-r`, `--refill` | Восполнять голод и комфорт чаем и морковью |

```bash
# Простой сбор наживки
python main.py harvest

# Сбор с восполнением характеристик
python main.py harvest -r
```

---

### 5. `frictionbrake` (или `fb`) — Авто фрикцион

Автоматически регулирует фрикционный тормоз катушки.

```
python main.py frictionbrake
python main.py fb
```

| Опция | Описание |
|---|---|
| `-V`, `--version` | Показать версию |

---

### 6. `calculate` (или `cal`) — Расчёт снасти

Рассчитывает характеристики снасти и рекомендуемый фрикцион с учётом износа.

```
python main.py calculate
python main.py cal
```

| Опция | Описание |
|---|---|
| `-V`, `--version` | Показать версию |

---

## Горячие клавиши во время работы

Настраиваются в `config.yaml` (раздел `KEY`):

| Клавиша по умолчанию | Действие | Параметр конфига |
|---|---|---|
| `[` | Пауза / возобновление (бот) | `KEY.PAUSE` |
| `Ctrl+C` | Завершить скрипт | `KEY.QUIT` |
| `[` | Сброс фрикциона | `KEY.FRICTION_BRAKE_RESET` |
| `]` | Выход из режима фрикциона | `KEY.FRICTION_BRAKE_QUIT` |
| `w` | Пауза движения | `KEY.MOVE_PAUSE` |
| `s` | Выход из режима движения | `KEY.MOVE_QUIT` |

---

## Файл конфигурации

Все настройки хранятся в файле `config.yaml` в корне проекта. Изменения вступают в силу после перезапуска.

Справка по всем параметрам: [`defaults.py`][default.py]

### Основные параметры

| Параметр | Описание | Значения |
|---|---|---|
| `LANGUAGE` | Язык интерфейса и распознавания | `"en"`, `"ru"` |
| `BOT.CLICK_LOCK` | Фиксация щелчка мыши Windows | `true`, `false` |
| `BOT.KEEPNET.CAPACITY` | Вместимость садка | число |
| `BOT.SPOOL_CONFIDENCE` | Чувствительность определения шпули | `0.0`–`1.0` |
| `BOT.JITTER_SCALE` | Масштаб случайных задержек | число |

---

## Профили

Профили позволяют сохранять настройки для разных стилей ловли.

### Добавление нового профиля

Скопируйте существующий профиль из конфига, измените и добавьте в раздел `PROFILE`:

```yaml
PROFILE:
  BOTTOM:
    DESCRIPTION: "Стандартная донная ловля."
    LAUNCH_OPTIONS: ""
    MODE: "bottom"
    CAST_POWER_LEVEL: 5.0
    CAST_DELAY: 4.0
    POST_ACCELERATION: false
    CHECK_DELAY: 16.0
    CHECK_MISS_LIMIT: 16
    PUT_DOWN_DELAY: 2.0
    RANDOM_ROD_SELECTION: true
            .
            .
            .
  MY_BOTTOM_FISHING:
    DESCRIPTION: "Моя настройка для донки."
    LAUNCH_OPTIONS: "-rctdDR"
    MODE: "bottom"
    CAST_POWER_LEVEL: 5.0
    CAST_DELAY: 4.0
    POST_ACCELERATION: false
    CHECK_DELAY: 16.0
    CHECK_MISS_LIMIT: 64
    PUT_DOWN_DELAY: 4.0
    RANDOM_ROD_SELECTION: false
```

> [!IMPORTANT]
> - Имя профиля должно быть **уникальным**.
> - Следите за правильностью **отступов** (YAML чувствителен к ним).
> - Допустимые значения `MODE`: `spin`, `bottom`, `pirk`, `elevator`, `telescopic`, `bolognese`.

---

## Переопределение конфигурации

Можно временно изменить любой параметр из `config.yaml` без редактирования файла — через аргументы командной строки:

```
.\main.exe LANGUAGE "ru"
```
```
.\main.exe bot BOT.KEEPNET.CAPACITY 200
```

Это удобно для одноразовых запусков с нестандартными настройками.

---

## Троллинг с двумя удочками

Троллинг на лодке — это, по сути, донная ловля с удержанием клавиш движения. Используйте профиль донной ловли с флагом `-T`:

```
.\main.exe bot -T KEY.BOTTOM_RODS "(1, 2)"
```

На лодке нет третьей подставки, поэтому переопределяем клавиши удочек на `1` и `2`.

---

## Структура папок

После запуска автоматически создаются:

| Папка | Содержимое |
|---|---|
| `screenshots/` | Скриншоты поклёвок и пойманных рыб |
| `logs/` | Логи выполнения, данные рыбалки, графики |

[launch_options]: /static/readme/launch_options.png
[config.yaml]: /rf4s/config/config.yaml
[default.py]: /rf4s/config/defaults.py
[favorite_food]: /static/readme/favorite_food.png
[favorite_lure]: /static/readme/favorite_lure.png
